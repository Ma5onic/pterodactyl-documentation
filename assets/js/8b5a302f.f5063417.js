"use strict";(self.webpackChunkpterodactyl=self.webpackChunkpterodactyl||[]).push([[142],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var o=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=o.createContext({}),d=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=d(e.components);return o.createElement(l.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=d(n),p=i,g=m["".concat(l,".").concat(p)]||m[p]||u[p]||r;return n?o.createElement(g,a(a({ref:t},c),{},{components:n})):o.createElement(g,a({ref:t},c))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[m]="string"==typeof e?e:i,a[1]=s;for(var d=2;d<r;d++)a[d]=n[d];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},2009:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var o=n(7462),i=(n(7294),n(3905));const r={},a="Migrating to Wings",s={unversionedId:"documentation/wings/migrating",id:"documentation/wings/migrating",title:"Migrating to Wings",description:"This guide is for people looking to migrate from the old Node.JS daemon to Wings. Please see the",source:"@site/docs/documentation/wings/migrating.md",sourceDirName:"documentation/wings",slug:"/documentation/wings/migrating",permalink:"/pterodactyl-documentation/docs/documentation/wings/migrating",draft:!1,editUrl:"https://github.com/QuintenQVD0/pterodactyl-documentation/blob/main/docs/documentation/wings/migrating.md",tags:[],version:"current",frontMatter:{},sidebar:"DocsSidebar",previous:{title:"Upgrading Wings",permalink:"/pterodactyl-documentation/docs/documentation/wings/upgrading"},next:{title:"Additional Configuration",permalink:"/pterodactyl-documentation/docs/documentation/wings/configuration"}},l={},d=[{value:"Install Wings",id:"install-wings",level:2},{value:"Copy New Configuration File",id:"copy-new-configuration-file",level:2},{value:"Remove Old Daemon",id:"remove-old-daemon",level:2},{value:"Remove Standalone SFTP",id:"remove-standalone-sftp",level:3},{value:"Daemonize Wings",id:"daemonize-wings",level:2}],c={toc:d},m="wrapper";function u(e){let{components:t,...r}=e;return(0,i.kt)(m,(0,o.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"migrating-to-wings"},"Migrating to Wings"),(0,i.kt)("p",null,"This guide is for people looking to migrate from the old Node.JS daemon to Wings. Please see the\n",(0,i.kt)("a",{parentName:"p",href:"/pterodactyl-documentation/docs/documentation/wings/installing"},"install guide")," if you are trying to install Wings for the first time on\na new node."),(0,i.kt)("admonition",{title:"Panel Version Requirement",type:"danger"},(0,i.kt)("p",{parentName:"admonition"},"You ",(0,i.kt)("strong",{parentName:"p"},"must")," be running Pterodactyl Panel 1.X in order to use Wings.")),(0,i.kt)("p",null,"You'll have a brief offline period as you perform this process, however no running game processes\nwill be affected. Plus, chances are your Panel will be offline (or in maintenance mode) during this\nso your users should not notice anything out of the ordinary."),(0,i.kt)("h2",{id:"install-wings"},"Install Wings"),(0,i.kt)("p",null,"The first step for installing the daemon is to make sure we have the required directory structure setup. To do so,\nrun the commands below which will create the base directory and download the wings executable."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir -p /etc/pterodactyl\ncurl -L -o /usr/local/bin/wings https://github.com/pterodactyl/wings/releases/latest/download/wings_linux_amd64\nchmod u+x /usr/local/bin/wings\n")),(0,i.kt)("h2",{id:"copy-new-configuration-file"},"Copy New Configuration File"),(0,i.kt)("p",null,"Once you have installed Wings, you'll need to copy over a new configuration file from the Panel. This file\nis in a new format, and should be easier for you to manage and edit in the future."),(0,i.kt)("p",null,"Simply copy and paste the code block and paste it into a file called ",(0,i.kt)("inlineCode",{parentName:"p"},"config.yml")," within the ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/pterodactyl"),"\ndirectory and save it."),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(556).Z,width:"3280",height:"2130"})),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Please note that any modifications you previously made to the configuration will be lost with this. If you have\nmodifications to our default settings, the best option is to start Wings once with the copied configuration which\nwill then populate all of the other configuration settings."),(0,i.kt)("p",{parentName:"admonition"},"From there you can make any adjustments as necessary.")),(0,i.kt)("h2",{id:"remove-old-daemon"},"Remove Old Daemon"),(0,i.kt)("p",null,"Now that Wings is installed, we need to remove all of the old daemon code from the server since it is not being\nused anymore. To do this, simply execute the following commands \u2014 assuming your old daemon is in the default\n",(0,i.kt)("inlineCode",{parentName:"p"},"/srv/daemon")," directory."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"# Stop the old daemon.\nsystemctl stop wings\n\n# Delete the entire directory. There is nothing stored in here that we actually need for the\n# purposes of this migration. Remember, server data is stored in /srv/daemon-data.\nrm -rf /srv/daemon\n\n# Optionally, remove NodeJS from your system if it was not used for anything else.\napt -y remove nodejs # or: yum remove nodejs\n")),(0,i.kt)("h3",{id:"remove-standalone-sftp"},"Remove Standalone SFTP"),(0,i.kt)("p",null,"If you've used the standalone SFTP server with the old daemon, we need to remove it's systemd service as well, as it's no longer needed.\nYou can do so using the following commands."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"# stop and disable the standalone sftp\nsystemctl disable --now pterosftp\n\n# delete the systemd service\nrm /etc/systemd/system/pterosftp.service\n")),(0,i.kt)("h2",{id:"daemonize-wings"},"Daemonize Wings"),(0,i.kt)("p",null,"You'll then need to edit your existing ",(0,i.kt)("inlineCode",{parentName:"p"},"systemd")," service file for Wings to point to the new control software. To do\nthis, open ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/systemd/system/wings.service")," and replace the entire contents of the file with the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"[Unit]\nDescription=Pterodactyl Wings Daemon\nAfter=docker.service\n\n[Service]\nUser=root\nWorkingDirectory=/etc/pterodactyl\nLimitNOFILE=4096\nPIDFile=/var/run/wings/daemon.pid\nExecStart=/usr/local/bin/wings\nRestart=on-failure\nStartLimitInterval=600\n\n[Install]\nWantedBy=multi-user.target\n")),(0,i.kt)("p",null,"Then, start wings."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"systemctl daemon-reload\nsystemctl enable --now wings\n")),(0,i.kt)("admonition",{title:"What if Wings doesn't start?",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"If you encounter issues starting Wings at this point, run the following command to start Wings directly and check\nfor any specific error output."),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre"},"sudo wings --debug\n"))))}u.isMDXComponent=!0},556:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/wings_configuration_example-03cd0238debffc71495335a54fc0c890.png"}}]);