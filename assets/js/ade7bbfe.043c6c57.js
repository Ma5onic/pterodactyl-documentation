"use strict";(self.webpackChunkpterodactyl=self.webpackChunkpterodactyl||[]).push([[783],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>y});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=p(n),m=l,y=u["".concat(s,".").concat(m)]||u[m]||c[m]||i;return n?a.createElement(y,r(r({ref:t},d),{},{components:n})):a.createElement(y,r({ref:t},d))}));function y(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=n.length,r=new Array(i);r[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[u]="string"==typeof e?e:l,r[1]=o;for(var p=2;p<i;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7472:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var a=n(7462),l=(n(7294),n(3905));const i={},r="CentOS 7",o={unversionedId:"community/panel_Installation/centos7",id:"community/panel_Installation/centos7",title:"CentOS 7",description:"In this guide we will install Pterodactyl v1.X \u2014 including all of it's dependencies \u2014 and configure our webserver",source:"@site/docs/community/panel_Installation/centos7.md",sourceDirName:"community/panel_Installation",slug:"/community/panel_Installation/centos7",permalink:"/pterodactyl-documentation/docs/community/panel_Installation/centos7",draft:!1,editUrl:"https://github.com/QuintenQVD0/pterodactyl-documentation/docs/community/panel_Installation/centos7.md",tags:[],version:"current",frontMatter:{},sidebar:"CommunitySidebar",previous:{title:"Community Guides and Tutorials",permalink:"/pterodactyl-documentation/docs/community/community_guides/about"},next:{title:"CentOS 8, Rocky Linux 8, AlmaLinux 8",permalink:"/pterodactyl-documentation/docs/community/panel_Installation/centos8"}},s={},p=[{value:"Install Requirements and Additional Utilities",id:"install-requirements-and-additional-utilities",level:2},{value:"SELinux tools",id:"selinux-tools",level:3},{value:"MariaDB",id:"mariadb",level:3},{value:"PHP 8.0",id:"php-80",level:3},{value:"Composer",id:"composer",level:3},{value:"Install Utility Packages",id:"install-utility-packages",level:2},{value:"Nginx",id:"nginx",level:3},{value:"Redis",id:"redis",level:3},{value:"SELinux commands",id:"selinux-commands",level:4},{value:"Server Configuration",id:"server-configuration",level:2},{value:"Configuring MariaDB",id:"configuring-mariadb",level:3},{value:"Adding MariaDB user",id:"adding-mariadb-user",level:4},{value:"Setup PHP",id:"setup-php",level:3},{value:"Nginx",id:"nginx-1",level:3},{value:"SSL Configuration",id:"ssl-configuration",level:4},{value:"Redis Setup",id:"redis-setup",level:3},{value:"Installing the Panel",id:"installing-the-panel",level:2}],d={toc:p},u="wrapper";function c(e){let{components:t,...n}=e;return(0,l.kt)(u,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"centos-7"},"CentOS 7"),(0,l.kt)("p",null,"In this guide we will install Pterodactyl v1.X \u2014 including all of it's dependencies \u2014 and configure our webserver\nto serve it using SSL."),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"This guide is based off the ",(0,l.kt)("a",{parentName:"p",href:"/pterodactyl-documentation/docs/documentation/panel/getting_started"},"official installation documentation")," but is tailored specifically for CentOS 7.")),(0,l.kt)("h2",{id:"install-requirements-and-additional-utilities"},"Install Requirements and Additional Utilities"),(0,l.kt)("p",null,"We will install all of Pterodactyl's ",(0,l.kt)("a",{parentName:"p",href:"/pterodactyl-documentation/docs/documentation/panel/getting_started#dependencies"},"required")," dependencies and a few aditional utilities."),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"If you run ",(0,l.kt)("inlineCode",{parentName:"p"},"sestatus")," and it shows ",(0,l.kt)("inlineCode",{parentName:"p"},"SELinux status: enabled")," you should install the following packages for later")),(0,l.kt)("h3",{id:"selinux-tools"},"SELinux tools"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yum install -y policycoreutils policycoreutils-python selinux-policy selinux-policy-targeted libselinux-utils setroubleshoot-server setools setools-console mcstrans\n")),(0,l.kt)("h3",{id:"mariadb"},"MariaDB"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"## Install Repos\ncat <<EOF > /etc/yum.repos.d/mariadb.repo\n# MariaDB 10.5 CentOS repository list - created 2017-07-14 12:40 UTC\n# http://downloads.mariadb.org/mariadb/repositories/\n[mariadb]\nname = MariaDB\nbaseurl = http://yum.mariadb.org/10.5/centos7-amd64\ngpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\ngpgcheck=1\nEOF\n\n## Get yum updates\nyum update -y\n\n## Install MariaDB 10.5\nyum install -y MariaDB-common MariaDB-server\n\n## Start maraidb\nsystemctl start mariadb\nsystemctl enable mariadb\n")),(0,l.kt)("h3",{id:"php-80"},"PHP 8.0"),(0,l.kt)("p",null,"We recommend the remi repo to get the latest php packages."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"## Install Repos\nyum -y install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\nyum -y install https://rpms.remirepo.net/enterprise/remi-release-7.rpm\nyum install -y yum-utils\nyum-config-manager --disable 'remi-php*'\nyum-config-manager --enable remi-php80\n\n## Get yum updates\nyum update -y\n\n## Install PHP 8.0\nyum install -y php php-{common,fpm,cli,json,mysqlnd,mcrypt,gd,mbstring,pdo,zip,bcmath,dom,opcache}\n")),(0,l.kt)("h3",{id:"composer"},"Composer"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yum install -y zip unzip # Required for Composer\ncurl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer\n")),(0,l.kt)("h2",{id:"install-utility-packages"},"Install Utility Packages"),(0,l.kt)("h3",{id:"nginx"},"Nginx"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yum install -y nginx\n\nfirewall-cmd --add-service=http --permanent\nfirewall-cmd --add-service=https --permanent \nfirewall-cmd --reload\n")),(0,l.kt)("h3",{id:"redis"},"Redis"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yum install -y --enablerepo=remi redis\n\nsystemctl start redis\nsystemctl enable redis\n")),(0,l.kt)("h4",{id:"selinux-commands"},"SELinux commands"),(0,l.kt)("p",null,"The following command will allow nginx to work with redis and "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"setsebool -P httpd_can_network_connect 1\nsetsebool -P httpd_execmem 1\nsetsebool -P httpd_unified 1\n")),(0,l.kt)("h2",{id:"server-configuration"},"Server Configuration"),(0,l.kt)("p",null,"This following section covers the configuration of parts of the server to run the panel."),(0,l.kt)("h3",{id:"configuring-mariadb"},"Configuring MariaDB"),(0,l.kt)("p",null,"The fastest way to set up mariadb is to use the ",(0,l.kt)("inlineCode",{parentName:"p"},"mysql_secure_installation")," command and follow prompts"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"mysql_secure_installation\n")),(0,l.kt)("p",null,"The following are safe defaults."),(0,l.kt)("p",null,"Change to your own secure password",(0,l.kt)("br",{parentName:"p"}),"\n",(0,l.kt)("inlineCode",{parentName:"p"},"Set root password? [Y/n] Y")),(0,l.kt)("p",null,"Get rid of users that could access the db by default",(0,l.kt)("br",{parentName:"p"}),"\n",(0,l.kt)("inlineCode",{parentName:"p"},"Remove anonymous users? [Y/n] Y")),(0,l.kt)("p",null,"Keep root off the external interfaces",(0,l.kt)("br",{parentName:"p"}),"\n",(0,l.kt)("inlineCode",{parentName:"p"},"Disallow root login remotely? [Y/n] Y")),(0,l.kt)("p",null,"Extra databases that aren't needed",(0,l.kt)("br",{parentName:"p"}),"\n",(0,l.kt)("inlineCode",{parentName:"p"},"Remove test database and access to it? [Y/n] Y")),(0,l.kt)("p",null,"Clears and sets all the changes made",(0,l.kt)("br",{parentName:"p"}),"\n",(0,l.kt)("inlineCode",{parentName:"p"},"Reload privilege tables now? [Y/n] Y")),(0,l.kt)("p",null,"All done! If you've completed all of the above steps, your MariaDB",(0,l.kt)("br",{parentName:"p"}),"\n","installation should now be secure."),(0,l.kt)("h4",{id:"adding-mariadb-user"},"Adding MariaDB user"),(0,l.kt)("p",null,"To add your first user to the database, see our tutorial on ",(0,l.kt)("a",{parentName:"p",href:"/pterodactyl-documentation/docs/documentation/tutorials/mysql_setup"},"setting up MySQL"),"."),(0,l.kt)("h3",{id:"setup-php"},"Setup PHP"),(0,l.kt)("p",null,"Place the contents below in a file inside the ",(0,l.kt)("inlineCode",{parentName:"p"},"/etc/php-fpm.d")," folder. The file can be named anything, but a good standard is ",(0,l.kt)("inlineCode",{parentName:"p"},"www-pterodactyl.conf"),". This config will match the nginx config later in the guide."),(0,l.kt)("p",null,"<<< @/.snippets/php-fpm/pterodactyl-centos.conf"),(0,l.kt)("p",null,"Start and enable php-fpm on the system."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"systemctl enable php-fpm\nsystemctl start php-fpm\n")),(0,l.kt)("h3",{id:"nginx-1"},"Nginx"),(0,l.kt)("p",null,"Please check our ",(0,l.kt)("a",{parentName:"p",href:"/pterodactyl-documentation/docs/documentation/tutorials/creating_ssl_certificates"},"tutorial")," on generating SSL certificates for more information."),(0,l.kt)("h4",{id:"ssl-configuration"},"SSL Configuration"),(0,l.kt)("p",null,"<<< @/.snippets/webservers/nginx-centos.conf{5,11,26-27}"),(0,l.kt)("h3",{id:"redis-setup"},"Redis Setup"),(0,l.kt)("p",null,"The default Redis install is perfectly fine for the panel. If you have Redis already in use you may want to look into\n",(0,l.kt)("a",{parentName:"p",href:"https://community.pivotal.io/s/article/How-to-setup-and-run-multiple-Redis-server-instances-on-a-Linux-host"},"running another Redis instance"),"."),(0,l.kt)("h2",{id:"installing-the-panel"},"Installing the Panel"),(0,l.kt)("p",null,"Excellent, we now have all of the required dependencies installed and configured. From here, follow the ",(0,l.kt)("a",{parentName:"p",href:"/pterodactyl-documentation/docs/documentation/panel/getting_started#download-files"},"official Panel installation documentation"),"."))}c.isMDXComponent=!0}}]);