"use strict";(self.webpackChunkpterodactyl=self.webpackChunkpterodactyl||[]).push([[363],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>m});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},f=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(t),f=r,m=p["".concat(s,".").concat(f)]||p[f]||d[f]||o;return t?a.createElement(m,i(i({ref:n},u),{},{components:t})):a.createElement(m,i({ref:n},u))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=f;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[p]="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=t[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}f.displayName="MDXCreateElement"},5162:(e,n,t)=>{t.d(n,{Z:()=>i});var a=t(7294),r=t(6010);const o={tabItem:"tabItem_Ymn6"};function i(e){let{children:n,hidden:t,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o.tabItem,i),hidden:t},n)}},4866:(e,n,t)=>{t.d(n,{Z:()=>k});var a=t(7462),r=t(7294),o=t(6010),i=t(2466),l=t(6550),s=t(1980),c=t(7392),u=t(12);function p(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:r}}=e;return{value:n,label:t,attributes:a,default:r}}))}function d(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??p(t);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function f(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const a=(0,l.k6)(),o=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,s._X)(o),(0,r.useCallback)((e=>{if(!o)return;const n=new URLSearchParams(a.location.search);n.set(o,e),a.replace({...a.location,search:n.toString()})}),[o,a])]}function g(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,o=d(e),[i,l]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!f({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:o}))),[s,c]=m({queryString:t,groupId:a}),[p,g]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,o]=(0,u.Nk)(t);return[a,(0,r.useCallback)((e=>{t&&o.set(e)}),[t,o])]}({groupId:a}),h=(()=>{const e=s??p;return f({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{h&&l(h)}),[h]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!f({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),c(e),g(e)}),[c,g,o]),tabValues:o}}var h=t(2389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y(e){let{className:n,block:t,selectedValue:l,selectValue:s,tabValues:c}=e;const u=[],{blockElementScrollPositionUntilNextRender:p}=(0,i.o5)(),d=e=>{const n=e.currentTarget,t=u.indexOf(n),a=c[t].value;a!==l&&(p(n),s(a))},f=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=u.indexOf(e.currentTarget)+1;n=u[t]??u[0];break}case"ArrowLeft":{const t=u.indexOf(e.currentTarget)-1;n=u[t]??u[u.length-1];break}}n?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":t},n)},c.map((e=>{let{value:n,label:t,attributes:i}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:l===n?0:-1,"aria-selected":l===n,key:n,ref:e=>u.push(e),onKeyDown:f,onClick:d},i,{className:(0,o.Z)("tabs__item",b.tabItem,i?.className,{"tabs__item--active":l===n})}),t??n)})))}function v(e){let{lazy:n,children:t,selectedValue:a}=e;const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a}))))}function _(e){const n=g(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",b.tabList)},r.createElement(y,(0,a.Z)({},e,n)),r.createElement(v,(0,a.Z)({},e,n)))}function k(e){const n=(0,h.Z)();return r.createElement(_,(0,a.Z)({key:String(n)},e))}},2287:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>s,default:()=>m,frontMatter:()=>l,metadata:()=>c,toc:()=>p});var a=t(7462),r=(t(7294),t(3905)),o=t(4866),i=t(5162);const l={},s="Webserver Configuration",c={unversionedId:"Documentation/Panel/webserver_configuration",id:"Documentation/Panel/webserver_configuration",title:"Webserver Configuration",description:"When using the SSL configuration you MUST create SSL certificates, otherwise your webserver will fail to start. See the Creating SSL Certificates documentation page to learn how to create these certificates before continuing.",source:"@site/docs/Documentation/Panel/webserver_configuration.mdx",sourceDirName:"Documentation/Panel",slug:"/Documentation/Panel/webserver_configuration",permalink:"/pterodactyl-documentation/docs/Documentation/Panel/webserver_configuration",draft:!1,editUrl:"https://github.com/pterodactyl/documentation/docs/Documentation/Panel/webserver_configuration.mdx",tags:[],version:"current",frontMatter:{},sidebar:"DocsSidebar",previous:{title:"Getting Started",permalink:"/pterodactyl-documentation/docs/Documentation/Panel/getting_started"},next:{title:"Additional Configuration",permalink:"/pterodactyl-documentation/docs/Documentation/Panel/additional_configuration"}},u={},p=[{value:"Enabling Configuration",id:"enabling-configuration",level:3},{value:"Enabling Configuration",id:"enabling-configuration-1",level:3},{value:"Enabling Configuration",id:"enabling-configuration-2",level:3},{value:"Enabling Configuration",id:"enabling-configuration-3",level:3},{value:"Next Step: Wings Installation",id:"next-step-wings-installation",level:4}],d={toc:p},f="wrapper";function m(e){let{components:n,...t}=e;return(0,r.kt)(f,(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"webserver-configuration"},"Webserver Configuration"),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"When using the SSL configuration you MUST create SSL certificates, otherwise your webserver will fail to start. See the ",(0,r.kt)("a",{parentName:"p",href:"/pterodactyl-documentation/docs/Documentation/Tutorials/creating_ssl_certificates"},"Creating SSL Certificates")," documentation page to learn how to create these certificates before continuing.")),(0,r.kt)(o.Z,{mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"Nginx With SSL",label:"Nginx With SSL",default:!0,mdxType:"TabItem"},"First, remove the default NGINX configuration.",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"rm /etc/nginx/sites-enabled/default\n")),(0,r.kt)("p",null,"Now, you should paste the contents of the file below, replacing ",(0,r.kt)("inlineCode",{parentName:"p"},"<domain>")," with your domain name being used in a file called ",(0,r.kt)("inlineCode",{parentName:"p"},"pterodactyl.conf")," and place the file in ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/nginx/sites-available/"),", or ","\u2014"," if on CentOS, ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/nginx/conf.d/"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-nginx"},'server_tokens off;\n\nserver {\n    listen 80;\n    server_name <domain>;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name <domain>;\n\n    root /var/www/pterodactyl/public;\n    index index.php;\n\n    access_log /var/log/nginx/pterodactyl.app-access.log;\n    error_log  /var/log/nginx/pterodactyl.app-error.log error;\n\n    # allow larger file uploads and longer script runtimes\n    client_max_body_size 100m;\n    client_body_timeout 120s;\n\n    sendfile off;\n\n    # SSL Configuration - Replace the example <domain> with your domain\n    ssl_certificate /etc/letsencrypt/live/<domain>/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/<domain>/privkey.pem;\n    ssl_session_cache shared:SSL:10m;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers "ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384";\n    ssl_prefer_server_ciphers on;\n\n    # See https://hstspreload.org/ before uncommenting the line below.\n    # add_header Strict-Transport-Security "max-age=15768000; preload;";\n    add_header X-Content-Type-Options nosniff;\n    add_header X-XSS-Protection "1; mode=block";\n    add_header X-Robots-Tag none;\n    add_header Content-Security-Policy "frame-ancestors \'self\'";\n    add_header X-Frame-Options DENY;\n    add_header Referrer-Policy same-origin;\n\n    location / {\n        try_files $uri $uri/ /index.php?$query_string;\n    }\n\n    location ~ \\.php$ {\n        fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n        fastcgi_pass unix:/run/php/php8.1-fpm.sock;\n        fastcgi_index index.php;\n        include fastcgi_params;\n        fastcgi_param PHP_VALUE "upload_max_filesize = 100M \\n post_max_size=100M";\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        fastcgi_param HTTP_PROXY "";\n        fastcgi_intercept_errors off;\n        fastcgi_buffer_size 16k;\n        fastcgi_buffers 4 16k;\n        fastcgi_connect_timeout 300;\n        fastcgi_send_timeout 300;\n        fastcgi_read_timeout 300;\n        include /etc/nginx/fastcgi_params;\n    }\n\n    location ~ /\\.ht {\n        deny all;\n    }\n}\n')),(0,r.kt)("h3",{id:"enabling-configuration"},"Enabling Configuration"),(0,r.kt)("p",null,"The final step is to enable your NGINX configuration and restart it."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# You do not need to symlink this file if you are using CentOS.\nsudo ln -s /etc/nginx/sites-available/pterodactyl.conf /etc/nginx/sites-enabled/pterodactyl.conf\n\n# You need to restart nginx regardless of OS.\nsudo systemctl restart nginx\n"))),(0,r.kt)(i.Z,{value:"Nginx Without SSL",label:"Nginx Without SSL",mdxType:"TabItem"},"First, remove the default NGINX configuration.",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"rm /etc/nginx/sites-enabled/default\n")),(0,r.kt)("p",null,"Now, you should paste the contents of the file below, replacing ",(0,r.kt)("inlineCode",{parentName:"p"},"<domain>")," with your domain name being used in a file called\n",(0,r.kt)("inlineCode",{parentName:"p"},"pterodactyl.conf")," and place the file in ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/nginx/sites-available/"),", or ","\u2014"," if on CentOS, ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/nginx/conf.d/"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-nginx"},'server {\n    # Replace the example <domain> with your domain name or IP address\n    listen 80;\n    server_name <domain>;\n\n\n    root /var/www/pterodactyl/public;\n    index index.html index.htm index.php;\n    charset utf-8;\n\n    location / {\n        try_files $uri $uri/ /index.php?$query_string;\n    }\n\n    location = /favicon.ico { access_log off; log_not_found off; }\n    location = /robots.txt  { access_log off; log_not_found off; }\n\n    access_log off;\n    error_log  /var/log/nginx/pterodactyl.app-error.log error;\n\n    # allow larger file uploads and longer script runtimes\n    client_max_body_size 100m;\n    client_body_timeout 120s;\n\n    sendfile off;\n\n    location ~ \\.php$ {\n        fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n        fastcgi_pass unix:/run/php/php8.1-fpm.sock;\n        fastcgi_index index.php;\n        include fastcgi_params;\n        fastcgi_param PHP_VALUE "upload_max_filesize = 100M \\n post_max_size=100M";\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        fastcgi_param HTTP_PROXY "";\n        fastcgi_intercept_errors off;\n        fastcgi_buffer_size 16k;\n        fastcgi_buffers 4 16k;\n        fastcgi_connect_timeout 300;\n        fastcgi_send_timeout 300;\n        fastcgi_read_timeout 300;\n    }\n\n    location ~ /\\.ht {\n        deny all;\n    }\n}\n')),(0,r.kt)("h3",{id:"enabling-configuration-1"},"Enabling Configuration"),(0,r.kt)("p",null,"The final step is to enable your NGINX configuration and restart it."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# You do not need to symlink this file if you are using CentOS.\nsudo ln -s /etc/nginx/sites-available/pterodactyl.conf /etc/nginx/sites-enabled/pterodactyl.conf\n\n# You need to restart nginx regardless of OS.\nsudo systemctl restart nginx\n"))),(0,r.kt)(i.Z,{value:"Apache With SSL",label:"Apache With SSL",mdxType:"TabItem"},"First, remove the default Apache configuration.",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"a2dissite 000-default.conf\n")),(0,r.kt)("p",null,"Now, you should paste the contents of the file below, replacing ",(0,r.kt)("inlineCode",{parentName:"p"},"<domain>")," with your domain name being used in a file called\n",(0,r.kt)("inlineCode",{parentName:"p"},"pterodactyl.conf")," and place the file in ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/apache2/sites-available"),", or ","\u2014"," if on CentOS, ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/httpd/conf.d/"),"."),(0,r.kt)("p",null,"Note: When using Apache, make sure you have the ",(0,r.kt)("inlineCode",{parentName:"p"},"libapache2-mod-php")," package installed or else PHP will not display on your webserver."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-apache"},'<VirtualHost *:80>\n  ServerName <domain>\n  \n  RewriteEngine On\n  RewriteCond %{HTTPS} !=on\n  RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R,L] \n</VirtualHost>\n\n<VirtualHost *:443>\n  ServerName <domain>\n  DocumentRoot "/var/www/pterodactyl/public"\n\n  AllowEncodedSlashes On\n  \n  php_value upload_max_filesize 100M\n  php_value post_max_size 100M\n\n  <Directory "/var/www/pterodactyl/public">\n    Require all granted\n    AllowOverride all\n  </Directory>\n\n  SSLEngine on\n  SSLCertificateFile /etc/letsencrypt/live/<domain>/fullchain.pem\n  SSLCertificateKeyFile /etc/letsencrypt/live/<domain>/privkey.pem\n</VirtualHost> \n')),(0,r.kt)("h3",{id:"enabling-configuration-2"},"Enabling Configuration"),(0,r.kt)("p",null,"Once you've created the file above, simply run the commands below. If you are on CentOS ",(0,r.kt)("em",{parentName:"p"},"you do not need to run the commands\nbelow!")," You only need to run ",(0,r.kt)("inlineCode",{parentName:"p"},"systemctl restart httpd"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# You do not need to run any of these commands on CentOS\nsudo ln -s /etc/apache2/sites-available/pterodactyl.conf /etc/apache2/sites-enabled/pterodactyl.conf\nsudo a2enmod rewrite\nsudo a2enmod ssl\nsudo systemctl restart apache2\n"))),(0,r.kt)(i.Z,{value:"Apache Without SSL",label:"Apache Without SSL",mdxType:"TabItem"},"First, remove the default Apache configuration.",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"a2dissite 000-default.conf\n")),(0,r.kt)("p",null,"Now, you should paste the contents of the file below, replacing ",(0,r.kt)("inlineCode",{parentName:"p"},"<domain>")," with your domain name being used in a file called\n",(0,r.kt)("inlineCode",{parentName:"p"},"pterodactyl.conf")," and place the file in ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/apache2/sites-available"),", or ","\u2014"," if on CentOS, ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/httpd/conf.d/"),"."),(0,r.kt)("p",null,"Note: When using Apache, make sure you have the ",(0,r.kt)("inlineCode",{parentName:"p"},"libapache2-mod-php")," package installed or else PHP will not display on your webserver."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-apache"},'<VirtualHost *:80>\n  ServerName <domain>\n  DocumentRoot "/var/www/pterodactyl/public"\n  \n  AllowEncodedSlashes On\n  \n  php_value upload_max_filesize 100M\n  php_value post_max_size 100M\n  \n  <Directory "/var/www/pterodactyl/public">\n    AllowOverride all\n    Require all granted\n  </Directory>\n</VirtualHost>\n')),(0,r.kt)("h3",{id:"enabling-configuration-3"},"Enabling Configuration"),(0,r.kt)("p",null,"Once you've created the file above, simply run the commands below. If you are on CentOS ",(0,r.kt)("em",{parentName:"p"},"you do not need to run the commands\nbelow!")," You only need to run ",(0,r.kt)("inlineCode",{parentName:"p"},"systemctl restart httpd"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# You do not need to run any of these commands on CentOS\nsudo ln -s /etc/apache2/sites-available/pterodactyl.conf /etc/apache2/sites-enabled/pterodactyl.conf\nsudo a2enmod rewrite\nsudo systemctl restart apache2\n")))),(0,r.kt)("h4",{id:"next-step-wings-installation"},"Next Step: ",(0,r.kt)("a",{parentName:"h4",href:"/pterodactyl-documentation/docs/Documentation/Wings/installing"},"Wings Installation")))}m.isMDXComponent=!0}}]);